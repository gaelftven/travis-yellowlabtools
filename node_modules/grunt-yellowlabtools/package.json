{
  "name": "grunt-yellowlabtools",
  "description": "Grunt plugin for YellowLabTools",
  "version": "1.0.1",
  "homepage": "https://github.com/gmetais/grunt-yellowlabtools",
  "author": {
    "name": "Gaël Métais",
    "email": "gael@gaelmetais.com",
    "url": "http://www.gaelmetais.com"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/gmetais/grunt-yellowlabtools.git"
  },
  "bugs": {
    "url": "https://github.com/gmetais/grunt-yellowlabtools/issues"
  },
  "licenses": [
    {
      "type": "GPL",
      "url": "https://github.com/gmetais/grunt-yellowlabtools/blob/master/LICENSE-GPL"
    }
  ],
  "engines": {
    "node": ">= 0.8.0"
  },
  "scripts": {
    "test": "grunt test"
  },
  "dependencies": {
    "async": "1.4.0",
    "q": "1.4.1",
    "request": "2.59.0",
    "yellowlabtools": "1.7.4"
  },
  "optionalDependencies": {
    "yellowlabtools": "1.7.4"
  },
  "devDependencies": {
    "chai": "^3.2.0",
    "grunt": "~0.4.5",
    "grunt-contrib-clean": "^0.6.0",
    "grunt-contrib-jshint": "^0.11.2",
    "grunt-express": "^1.4.1",
    "grunt-mocha-test": "^0.12.7",
    "matchdep": "^0.3.0",
    "mocha": "^2.2.5",
    "sinon": "^1.15.4",
    "sinon-chai": "^2.8.0"
  },
  "peerDependencies": {
    "grunt": "~0.4.5"
  },
  "keywords": [
    "gruntplugin",
    "performance",
    "budget",
    "metrics",
    "yellowlabtools",
    "phantomas"
  ],
  "readme": "# grunt-yellowlabtools\n\n> Grunt plugin for YellowLabTools.\n\n[YellowLabTools](http://yellowlab.tools) is an audit tool that loads a page in PhantomJS and detects front-end **bad practices** and **performance issues**.\n\nUsing audit tools is great, but you're going to use it once or twice, then forget about it! This Grunt plugin helps you add a **performance checking** step to your workflow.\n\n1. Configure it once\n2. Add it to your delivery process\n3. Forget about it...\n4. ...until the day something goes wrong and the task fails\n\n\nI recommend using this grunt task if:\n - you're a developper and you're optimizing your code\n - you're a devOps and you want to block a release while the staging website is not perfect\n - you're a team and you're practicing continous integration\n\n\nUnlike most of the similar tools ([grunt-pagespeed](https://github.com/jrcryer/grunt-pagespeed), [grunt-perfbudget](https://github.com/tkadlec/grunt-perfbudget), [grunt-pagespeedio](https://github.com/sitespeedio/grunt-sitespeedio)), grunt-yellowlabtools can run **locally** (default behavior), instead of calling a server you don't own. This is great for testing non-public pages!\n\n\n\n## Getting Started\nThis plugin requires Grunt `~0.4.5`\n\nIf you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:\n\n```shell\nnpm install grunt-yellowlabtools --save-dev\n```\n\nOnce the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:\n\n```js\ngrunt.loadNpmTasks('grunt-yellowlabtools');\n```\n\n## The \"yellowlabtools\" task\n\n### Overview\nIn your project's Gruntfile, add a section named `yellowlabtools` to the data object passed into `grunt.initConfig()`.\n\n```js\ngrunt.initConfig({\n  yellowlabtools: {\n    production: {\n      urls: [\n        'https://github.com/',\n        'https://github.com/features'\n      ],\n      failConditions: [\n        // The global score is the one calculated by Yellow Lab Tools\n        'fail if at least one url has a global score < 80/100',\n\n        // Every single rule has its own score\n        'fail if at least one url has a rule score < 50/100',\n\n        // You can be more demanding on a scpecific rule\n        'fail if at least one url has a domElementsCount score < 100/100',\n\n        // Or you can decide to be cooler on a specific rule\n        'fail if at least one url has a domMaxDepth score < 20/100',\n        \n        // ... coolest\n        'ignore iframesCount',\n\n        // For each rule, you can check directly the metric instead of the score by omitting '/100'\n        'fail if at least one url has a domElementsCount > 2000'\n      ],\n      options: {\n        device: 'phone'\n      }\n    }\n  }\n});\n```\n\n\n### Options\n\n##### device [String]\nUse \"phone\" or \"tablet\" to simulate a mobile device (by user-agent and viewport size). Default is \"desktop\".\n\n##### cookie [String]\nAdds a cookie on the main domain. Example: `bar=foo;domain=url`.\n\n##### authUser [String] & authPass [String]\nYour credentials if you need to bypass a basic HTTP authentication.  \nIf your authentication is not basic, you might be able to copy the session cookie from your browser, paste it in the \"Cookie\" setting and launch a run before your cookie expires.\n\n##### locally [Boolean]\nBy default, runs are launched locally, using the NodeJS version of YLT (without the HTML user interface). If you want to run the tests remotely on a YLT server (the public instance or your own instance), set this boolean to false. Default is true.  \nPlease note that local tests are much faster than the YLT's public instance, where your runs will be queued and limited to 50 runs per day.  \nHowever, running on a distant server provides you with the url of the HTML report, and that's pretty cool!\n\n##### serverUrl [String]\nWhen `locally` is false, this is the url of the server you want to run the tests on. Default is the public instance `http://yellowlab.tools`.  \nIf you need to launch more runs (or for any other reason), you can run the test on your own private instance (see [How to install your private server](https://github.com/gmetais/YellowLabTools/wiki/Install-your-private-server)).\n\n##### apiKey [String]\nTo avoid abuse and keep the service free for everyone, the API will block your IP if you launched more than 50 runs in the last 24h.  \nIf you have a good reason, please email me so I can give you an api-key. You can also create and host [your private instance](https://github.com/gmetais/YellowLabTools/wiki/Install-your-private-server).\n\n\n### Usage Examples\n\n#### Define a threshold on Yellow Lab Tools' global score\n\n\n```js\ngrunt.initConfig({\n  yellowlabtools: {\n    production: {\n      urls: [\n        'http://mywebsite.com'\n      ],\n      failConditions: [\n        'fail if at least one url has a global score < 80/100'\n      ]\n    }\n  }\n});\n```\n\nThe words `if at least one url` are not very relevant when testing only one url. But don't forget them.\n\n\n#### Define a threshold for every rule\n\n```js\ngrunt.initConfig({\n  yellowlabtools: {\n    production: {\n      urls: [\n        'http://mywebsite.com'\n      ],\n      failConditions: [\n        'fail if at least one url has a rule score < 40/100'\n      ]\n    }\n  }\n});\n```\n\n#### Ignore the threshold for some specific rules\n\n```js\ngrunt.initConfig({\n  yellowlabtools: {\n    production: {\n      urls: [\n        'http://mywebsite.com'\n      ],\n      failConditions: [\n        'fail if at least one url has a rule score < 40/100',\n        'ignore iframesCount',\n        'ignore globalVariables'\n      ]\n    }\n  }\n});\n```\n\nThese two ignored rules will never complain again. Please note that ignoring rules will have no effect on the global score.\n\n\n#### Define a threshold for a single rule\n\n```js\ngrunt.initConfig({\n  yellowlabtools: {\n    production: {\n      urls: [\n        'http://mywebsite.com'\n      ],\n      failConditions: [\n        'fail if at least one url has a DOMelementMaxDepth score < 90/100'\n      ]\n    }\n  }\n});\n```\n\nSee the list of rules in the next chapter.\n\nIf you defined a threshold for every rule, adding a single rule condition has the power to override it. For example, you can assert check that every rule score is over 80 **except** DOMelementMaxDepth that can be as low as 12.\n\n\n#### Define a threshold on a metric\n\n```js\ngrunt.initConfig({\n  yellowlabtools: {\n    production: {\n      urls: [\n        'http://mywebsite.com'\n      ],\n      failConditions: [\n        'fail if at least one url has a DOMelementsCount > 2000'\n      ]\n    }\n  }\n});\n```\n\nThe only difference between a metric threshold and a score threshold is the `score` word before the `<` or `>` operator.\n\nDefining a threshold on a metric overrides any score threshold you might have defined.\n\n\n## Rules\n\nHere is the list of rules you can threshold.\n\n#### Page weight\n* totalWeight: total number of bytes downloaded\n* imageOptimization: number of bytes that could be saved by optimising images\n* gzipCompression: number of bytes that could be saved by compressing file transfers\n* fileMinification: number of bytes that could be saved by minifying JS, CSS and HTML\n\n#### Requests\n* totalRequests: total number of HTTP requests made\n* domains: number of domains used\n* notFound: number of HTTP 404 responses\n* multipleRequests: number of static assets that are requested more than once\n* smallRequests: requests that are smaller than 2 KB\n* lazyLoadableImagesBelowTheFold: images displayed below the fold that could be lazy-loaded\n\n#### DOM complexity\n* DOMelementsCount: total number of HTML element nodes\n* DOMelementMaxDepth: maximum level on nesting of HTML element node\n* iframesCount: number of iframe nodes\n* DOMidDuplicated: number of duplicated IDs found in DOM\n\n#### DOM manipulations\n* DOMaccesses: number of calls to DOM related functions, from both DOM api and jQuery\n* queriesWithoutResults: number of queries that returned nothing\n* DOMqueriesAvoidable: number of repeated uses of a duplicated query\n\n#### Scroll bottlenecks\n* eventsScrollBound: number of scroll event listeners binded to window or document\n* DOMaccessesOnScroll: number of DOM-accessing functions calls on a scroll event\n\n#### Bad JavaScript\n* jsErrors: number of JavaScript errors\n* documentWriteCalls: number of calls to document.write(ln)\n* consoleMessages: number of calls to console.* functions\n* globalVariables: number of JS globals variables\n\n#### jQuery\n* jQueryVersion: version of jQuery framework (if loaded)\n* jQueryVersionsLoaded: number of loaded jQuery \"instances\"\n* jQueryFunctionsUsed: number of different core jQuery functions called on load\n* jQueryCallsOnEmptyObject: number of jQuery functions called on an empty jQuery object\n* jQueryNotDelegatedEvents: number of events bound without using event delegation\n\n#### CSS complexity\n* cssRules: number of CSS rules\n* cssComplexSelectors: number of selectors consisting in 4 or more expressions\n* cssComplexSelectorsByAttribute: selectors with complex matching by attribute (e.g. `[class$=\"foo\"]`)\n* cssColors: number of unique colors used in CSS\n\n#### Bad CSS\n* cssParsingErrors: number of syntax error found in the CSS\n* cssImports: number of `@import` rules\n* cssDuplicatedSelectors: number of CSS selectors defined more than once\n* cssDuplicatedProperties: number of CSS property definitions duplicated within a selector\n* cssEmptyRules: number of rules with no properties\n* cssExpressions: number CSS expressions (e.g. `expression(document.body.clientWidth > 600 ? \"600px\" : \"auto\")`)\n* cssImportants: number of properties with value forced by `!important`\n* cssOldIEFixes: number of fixes for old versions of Internet Explorer\n* cssOldPropertyPrefixes: number of no longer needed vendor prefix (e.g. `--moz-border-radius`)\n* cssUniversalSelectors: number of selectors trying to match every element (e.g. `.foo > *`)\n* cssRedundantBodySelectors: number of redundant body selectors (e.g. `body .foo`)\n* cssRedundantChildNodesSelectors: number of redundant child nodes selectors (e.g. `ul li`, `table tr`)\n\n#### Server config\n* closedConnections: number of requests not keeping the connection alive\n* cachingNotSpecified: responses with no caching header sent\n* cachingDisabled: responses with caching disabled\n* cachingTooShort: responses with too short caching time (less than a week)\n\n\n\n## Results\n\nHere is an example of a `yellowlabtools` grunt task failing. I hope it won't happen too often on your website:\n\n![results screenshot](screenshot.png)\n\n\n## Author\nGaël Métais. I'm a webperf freelance based in Paris. If you understand french, you can visit [my website](http://www.gaelmetais.com).\n",
  "readmeFilename": "README.md",
  "_id": "grunt-yellowlabtools@1.0.1",
  "_shasum": "89e051796f059f424818cab75b430f86e7fc5047",
  "_resolved": "git://github.com/gmetais/grunt-yellowlabtools.git#a7bd9e6179f41b5222c318ed225ee949cf82e750",
  "_from": "grunt-yellowlabtools@git://github.com/gmetais/grunt-yellowlabtools.git#optional"
}
